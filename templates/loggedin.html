<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <img src="{{ url_for('static', filename='imagenes/favicon.png') }}" alt="Favicon" style="width: 50px; height: 50px;">

    <!--Css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/fcd9587eb2.js" crossorigin="anonymous"></script>
</head>
<body>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

    <div class="container-fluid row">
        <form class="col-4 p-3" id="registration-form" class="form-formulario" method="POST" action="{{ url_for('formulario') }}" onsubmit="return validarFormulario();">
            <h3 class="text_center text-secondary">Registro de Usuarios</h3>
            <input type="hidden" name="id" value="{{ usuario.id if usuario else '' }}">
            
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre/s</label>
                <input type="text" class="form-control" name="nombre" required placeholder="Ingrese su nombre/s..." value="{{ usuario.nombre if usuario else '' }}">
            </div>
            <div class="mb-3">
                <label for="apellido" class="form-label">Apellidos/s</label>
                <input type="text" class="form-control" name="apellido" required placeholder="Ingrese su apellido/s..." value="{{ usuario.apellido if usuario else '' }}">
            </div>
            <div class="mb-3">
                <label for="dni" class="form-label">DNI</label>
                <input type="text" class="form-control" name="dni" required placeholder="Ingrese su DNI..." value="{{ usuario.dni if usuario else '' }}">
            </div>
            <div class="mb-3">
                <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento</label>
                <input type="date" class="form-control" name="fecha">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="text" class="form-control" name="correo" required placeholder="Ingrese email..." value="{{ usuario.email if usuario else '' }}">
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="text" class="form-control" name="password" required placeholder="Ingrese password..." value="{{ usuario.password if usuario else '' }}">
            </div>
            <button class="button-formulario" id="enviarButton" type="submit">Registrar</button>

        </form>
        <div class="col-8 p-4">
            <table class="table">
                <thead class="bg-info">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">NOMBRE</th>
                        <th scope="col">APELLIDO</th>
                        <th scope="col">DNI</th>
                        <th scope="col">FECHA NAC.</th>
                        <th scope="col">CORREO</th>
                        <th scope="col"><a href="" class="btn btn-sm"><i class="fa-solid fa-user-plus"></i></a></th>
                    </tr>
                </thead>
                <tbody>
                    {% for usuario in usuarios %}
                    <tr id="usuario_{{ usuario.id }}">
                        <td>{{ usuario.id }}</td>
                        <td>{{ usuario.nombre }}</td>
                        <td>{{ usuario.apellido }}</td>
                        <td>{{ usuario.dni }}</td>
                        <td>{{ usuario.fecha_nacimiento }}</td>
                        <td>{{ usuario.email }}</td>
                        <td>
                            <a href="" class="btn btn-sm btn-primary" onclick="ver('{{ usuario.dni }}')"><i class="fa-solid fa-eye"></i></a>
                            <a href="" class="btn btn-sm btn-warning"><i class="fa-solid fa-pen-to-square"></i></a>
                            <a href="" class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i></a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="7">No hay Registros</td>
                    </tr>
                    {% endfor %}
                </tbody>
                
            </table>
        </div>
    </div>
    <!--Css-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
